# DVC 配置文件清单

**生成日期**: 2025-11-29
**DVC 版本**: 3.64.0
**项目**: 客户分群精准营销 MLOps

---

## 📁 生成的目录结构

```
CASE-customer-group/
├── .dvc/                        # ✅ DVC 配置目录
│   ├── config                   # ✅ DVC 配置文件
│   └── .gitignore               # ✅ DVC 内部忽略规则
│
├── .dvc-storage/                # ✅ 本地数据存储
│   └── files/md5/               # 数据文件的哈希存储
│       ├── 43/dc1fc03d...       # customer_base.csv (1.7MB)
│       └── cd/877d138...        # customer_behavior_assets.csv (25MB)
│
├── docs/                        # 📖 文档目录
│   └── dvc/                     # DVC 相关文档
│       ├── DVC初始化配置.md     # 初始化过程详解
│       ├── 快速参考.md          # 常用命令速查
│       └── 配置文件清单.md      # 本文件
│
├── .dvcignore                   # ✅ DVC 忽略规则
├── .gitignore                   # ✅ 已更新（排除数据文件）
├── requirements.txt             # ✅ Python 依赖 (DVC 3.64.0)
│
├── customer_base.csv            # 数据文件 (1.7MB)
├── customer_base.csv.dvc        # ✅ DVC 元数据
├── customer_behavior_assets.csv # 数据文件 (25MB)
├── customer_behavior_assets.csv.dvc # ✅ DVC 元数据
│
└── [其他现有文件...]
```

---

## 📄 配置文件详解

### 1. `.dvc/config`
**作用**: DVC 核心配置文件
**位置**: `.dvc/config`
**内容**:
```ini
[core]
    remote = storage

['remote "storage"']
    url = .dvc-storage
```

**说明**:
- `[core]` 部分: DVC 核心设置
- `remote = storage`: 设置默认远程存储为 "storage"
- `['remote "storage"']`: 远程存储 "storage" 的配置
- `url = .dvc-storage`: 存储位置为项目内 `.dvc-storage` 目录

---

### 2. `.dvcignore`
**作用**: DVC 忽略文件规则
**位置**: `.dvcignore`
**内容**:
```
# Python
__pycache__
*.pyc
.venv/

# IDE
.idea/
.vscode/
.claude/

# 临时文件
*.tmp
.DS_Store
```

**说明**:
- DVC 在追踪数据时会跳过这些文件/目录
- 类似于 `.gitignore` 但用于 DVC

---

### 3. `.gitignore` (已更新)
**作用**: Git 忽略规则
**位置**: `.gitignore`
**新增内容**:
```
/customer_base.csv
/customer_behavior_assets.csv
```

**说明**:
- DVC 自动添加这些规则
- 实际数据文件不再被 Git 追踪
- `.dvc-storage/` 自动被 DVC 忽略

---

### 4. `customer_base.csv.dvc`
**作用**: 数据文件的 DVC 元数据
**位置**: `customer_base.csv.dvc`
**大小**: 105 bytes
**内容**:
```yaml
outs:
- md5: 43dc1fc03d919018d4940e2085283df7
  size: 1689829
  hash: md5
  path: customer_base.csv
```

**说明**:
- `md5`: 数据文件的 MD5 哈希值
- `size`: 文件大小（字节）
- `path`: 原始文件位置
- 这个文件被 Git 追踪（轻量级）

---

### 5. `customer_behavior_assets.csv.dvc`
**作用**: 数据文件的 DVC 元数据
**位置**: `customer_behavior_assets.csv.dvc`
**大小**: 117 bytes
**内容**:
```yaml
outs:
- md5: cd877d138572be0f3cf775c988cc74df
  size: 25780197
  hash: md5
  path: customer_behavior_assets.csv
```

---

### 6. `requirements.txt`
**作用**: Python 依赖包管理
**位置**: `requirements.txt`
**内容**:
```
# DVC - Data Version Control
dvc==3.64.0
```

**说明**:
- 记录了 DVC 的确切版本
- 可扩展添加其他依赖 (pandas, numpy 等)

---

## 📊 配置清单

| 配置项 | 状态 | 说明 |
|--------|------|------|
| DVC 初始化 | ✅ | 已在项目中初始化 `.dvc/` |
| 本地存储 | ✅ | 配置为 `.dvc-storage/` |
| 数据追踪 | ✅ | 2个 CSV 文件已追踪 |
| 数据推送 | ✅ | 26.7MB 数据已推送 |
| Git 忽略 | ✅ | 自动添加数据文件排除规则 |
| DVC 忽略 | ✅ | 创建 `.dvcignore` |
| Python 依赖 | ✅ | requirements.txt 已创建 |

---

## 🔍 文件关系图

```
Git 仓库
├── .dvc/              ← Git 追踪
├── .dvcignore         ← Git 追踪
├── .gitignore         ← Git 追踪
├── *.csv.dvc          ← Git 追踪 (元数据)
└── requirements.txt   ← Git 追踪

DVC 管理
├── .dvc-storage/      ← 本地存储 (NOT Git 追踪)
│   └── files/md5/     ← 实际数据存储
└── *.csv              ← 数据文件 (NOT Git 追踪)
```

---

## 🔄 数据流向

```
1️⃣ 原始文件                2️⃣ DVC 追踪
   customer_base.csv    →   customer_base.csv.dvc
   (1.7MB)                  (105 bytes) ← Git 追踪

3️⃣ 计算哈希值             4️⃣ 存储数据
   MD5: 43dc1fc0...     →   .dvc-storage/files/md5/43/dc1fc03d...
                            (实际存储，NOT Git 追踪)

5️⃣ 数据恢复
   dvc checkout          →   从 .dvc-storage 恢复 CSV 文件
```

---

## ✨ 关键特性

### 轻量级版本控制
- 🔹 Git 仓库大小: ~1KB (只存储元数据)
- 🔹 而不是: 26MB (完整数据文件)

### 数据完整性
- 🔐 每个文件都有 MD5 哈希校验
- 🔍 自动检测文件改动
- 🛡️ 确保数据一致性

### 易于协作
- 👥 其他成员可用 `dvc pull` 获取数据
- 📦 不需要大文件传输
- 🔄 支持多个版本共存

---

## 📋 验证清单

在使用前，请确认以下文件存在：

- [ ] `.dvc/config` 文件存在且包含正确配置
- [ ] `.dvc-storage/` 目录存在且包含数据
- [ ] `.dvcignore` 文件存在
- [ ] `.gitignore` 已更新
- [ ] `*.csv.dvc` 文件存在
- [ ] `requirements.txt` 已创建
- [ ] `docs/dvc/` 目录包含文档

**验证命令**:
```bash
# 查看 DVC 状态
dvc status

# 查看远程存储
dvc remote list -v

# 查看追踪的文件
ls -lh *.csv.dvc

# 查看存储内容
du -sh .dvc-storage
```

---

## 🚀 后续配置

### 第2周任务
- [ ] 创建 `params.yaml` (参数配置)
- [ ] 创建 `dvc.yaml` (流水线定义)
- [ ] 创建 `data/` 目录结构
- [ ] 创建 `models/` 目录结构

### 团队协作 (可选)
- [ ] 迁移到云存储 (S3, Azure)
- [ ] 配置备份存储
- [ ] 设置访问权限

---

**✅ 配置完成！项目已准备就绪。**
**📖 查看 [DVC初始化配置.md](1.\ DVC初始化配置.md) 了解详细步骤。**
**📝 查看 [README.md](1.\ README.md) 了解文档导航。**
**🎯 查看 [DVC实施计划.md](0.\ DVC实施计划.md) 了解后续任务。**
